{% extends "esi_players/base_generic.html" %}
{% load static %}


{% block content %}
     {% block title %}<title>Esports Player Index</title>{% endblock %}


        <!-- Custom Modal -->
    <div class="modal fade" tabindex="-1" role="dialog" id="modal">
        <div class="modal-dialog" role="document">
            <div class="modal-content"></div>
        </div>
    </div>

    {% block css %}
        <link href="{% static 'esi_players/vendor/datatables/dataTables.bootstrap4.min.css'%}" rel="stylesheet">
             <!-- Page level plugins -->
  <script src="{% static 'esi_players/vendor/datatables/jquery.dataTables.min.js'%}"></script>
  <script src="{% static 'esi_players/vendor/datatables/dataTables.bootstrap4.min.js'%}"></script>

  <!-- Page level custom scripts -->
  <script src="{% static 'esi_players/js/demo/datatables-demo.js'%}"></script>

    {% endblock css %}


          <!-- DataTales Example -->
          <div class="card shadow mb-4">
            <div class="card-header py-3">
              <h6 class="m-0 font-weight-bold text-primary">Player Rankings</h6>
            </div>
            <div class="card-body">
              <div class="table-responsive">
                <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                  <thead>
                    <tr>
                      <th>Image</th>
                      <th>In Game Name</th>
                      <th>First Name</th>
                      <th>Last Name</th>
                        <th>Profile</th>
                        <th>Buy</th>
                        <th>Sell</th>
                    </tr>
                  </thead>

                  <tbody>
                  {% if assets %}

                      {% for asset in assets %}
                    <tr>
                      <td><img  src="{{ asset.player.images.thumbnail }}" class="img-fluid img-profile "></td>
                      <td>{{ asset.player.ign }}</td>
                      <td>{{ asset.player.first_name }}</td>
                      <td>{{ asset.player.last_name }}</td>
                      <td> <a href=" {% url 'player' asset.player.id %}" class="btn btn-light btn-icon-split">
                          <span class="icon text-gray-600">
                              <i class="fas fa-arrow-right">

                              </i>
                          </span>
                          <span class="text"> view {{ asset.player.ign }} Profile</span>

                      </a></td>
                    <td><button class="bs-modal btn btn-success btn-icon-split " data-form-url="{% url 'transaction_form' 'Buy' asset.player.id %}"  type="button"
                                name="button">
                    <span class="icon text-white-50">
                      <i class="fas fa-money"></i>
                    </span>
                    <span class="text">£{{asset.value }}</span>
                  </button></td>

                        <td><button class="bs-modal btn btn-danger btn-icon-split " data-form-url="{% url 'transaction_form' 'Sell' asset.player.id %}"  type="button"
                                name="button">
                    <span class="icon text-white-50">
                      <i class="fas fa-money"></i>
                    </span>
                    <span class="text">£{{ asset.value }}</span>
                  </button></td>


                    </tr>
                      {% endfor %}
                  {% else %}
                      <p>No Players Available</p>
                  {% endif %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>

    {% block js %}

                <script type="text/javascript">
            $(function () {

                $(".bs-modal").each(function() {
                    $(this).modalForm(
                        {
                            formURL: $(this).data("form-url")
                        });


                    // Hide message
                    $(".alert").fadeTo(2000, 500).slideUp(500, function () {
                        $(".alert").slideUp(500);
                    });
                });
            });
        </script>



    {% endblock js %}


{% endblock %}